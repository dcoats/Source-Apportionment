library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
mdl<-"
model
{
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-inprod(yfleet1profiles[p,1:profiles],f[1:profiles,t])
}
}
for(p in 1:93)
{
for(t in 1:days)
{
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f','fex')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
baysolution.out<-read.bugs(mvn.sim)
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
mdl<-"
model
{
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-inprod(yfleet1profiles[p,1:profiles],f[1:profiles,t])
}
}
for(p in 1:93)
{
for(t in 1:days)
{
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f','fex')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
baysolution.out<-read.bugs(mvn.sim)
summary(baysolution.out)
plot(baysolution.out)
plot.autocorr(baysolution.out)
autocorr.plot(baysolution.out)
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
arr <- array(seq_len(3*3*3), dim = rep(93,days,profiles))
arr
arr[3,2,1]
sum(arr[3,2,])
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
arr <- array(seq_len(3*3*3), dim = rep(93,days,profiles))
multiplied<-matrix(NA,93,days)
for(p in 1:93)
{
for(t in 1:days)
{
for(k in 1:profiles)
{
arr[p,t,k]<-yfleet1profiles[p,k]*f[k,t]
}
}
}
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-sum(arr[p,t,])
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
for(p in 1:93)
{
for(t in 1:days)
{
for(k in 1:profiles)
{
arr[p,t,k]<-yfleet1profiles[p,k]*f[k,t]
}
}
}
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-sum(arr[p,t,])
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
for(p in 1:93)
{
for(t in 1:days)
{
for(k in 1:profiles)
{
arr[p,t,k]<-yfleet1profiles[p,k]*f[k,t]
}
}
}
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-sum(arr[p,t,])
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c(f)
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
f
arr<-array[NA,3,3,3]
help(array)
arr<-array[NA,c(3,3,3)]
arr<-array(NA,c(3,3,3))
arr
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
arr<-array(NA,c(93,days,profiles))
for(p in 1:93)
{
for(t in 1:days)
{
for(k in 1:profiles)
{
arr[p,t,k]<-yfleet1profiles[p,k]*f[k,t]
}
}
}
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-sum(arr[p,t,])
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
for(p in 1:93)
{
for(t in 1:days)
{
for(k in 1:profiles)
{
arr[p,t,k]<-yfleet1profiles[p,k]*f[k,t]
}
}
}
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-sum(arr[p,t,])
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-inprod2(yfleet1profiles[p,1:profiles],f[1:profiles,t])
}
}
for(p in 1:93)
{
for(t in 1:days)
{
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-inprod(yfleet1profiles[p,1:profiles],f[1:profiles,t])
}
}
for(p in 1:93)
{
for(t in 1:days)
{
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
yfleet1profiles
ysims
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-inprod(yfleet1profiles[p,1:profiles],f[1:profiles,t])
}
}
for(p in 1:93)
{
for(t in 1:days)
{
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-('f')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
library(R2WinBUGS)
library(arm)
y<-ysims
y<-as.matrix(y)
yfleet1profiles
profiles<-3 #number of profiles
cv<-.2
days<-10
plot(density(rgamma(10000,shape=18,rate=2)))
model
{
for(p in 1:93)
{
for(t in 1:days)
{
multiplied[p,t]<-inprod(yfleet1profiles[p,1:profiles],f[1:profiles,t])
}
}
for(p in 1:93)
{
for(t in 1:days)
{
ylog[p,t]<-log(y[p,t]);
mu[p,t]<-log(multiplied[p,t])-.5*log(vari);
ylog[p,t] ~ dnorm(mu[p,t],prec);
}
}
for(t in 1:days)
{
f[1,t]~dgamma(18,2);
f[2,t]~dgamma(10,2);
f[3,t]~dgamma(12,2);
}
vari<-log(((cv*cv)+1))
prec<-1/vari
}"
writeLines(mdl,'mvn.txt')
data<-c('y','days','profiles','cv','yfleet1profiles')
parameters<-c('f','fbob')
mvn.sim<-bugs(data,inits=NULL,parameters,bugs.directory="C:/Users/David Coats/Downloads/winbugs14/WinBUGS14",model.file='mvn.txt',
n.iter=10000,n.burnin=2000,
n.chains=1,n.thin=1,debug=TRUE,codaPkg=T)
